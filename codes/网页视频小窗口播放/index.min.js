/**title:网页视频小窗口播放**/console.log("\n %c 网页视频小窗口播放 %c @Sogrey \n\n","color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;");var getElement=function(e){return document.querySelector(e)},getElementAll=function(e){return document.querySelectorAll(e)},displayNoneElements=function(e){e&&0<e.length&&e.forEach(e=>e.style.display="none")};function addMethod(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent(`on${t}`,n):e[`on${t}`]=n}function removeMethod(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent(`on${t}`,n):e[`on${t}`]=n}function openSmallWindow(e){document.pictureInPictureEnabled&&!e.disablePictureInPicture?document.pictureInPictureElement||e.requestPictureInPicture():alert("抱歉，当前不支持画中画！")}String.prototype.startWith=function(e){var t=this.length-e.length;return 0<e.length&&0<=t&&0==this.indexOf(e)},String.prototype.endWith=function(e){var t=this.length-e.length;return 0<=t&&this.lastIndexOf(e)==t};var styleId="NewVideoWindow_a_style",aId="NewVideoWindow_a";function createStyle(e,t){getElement(`#${styleId}`)||((n=document.createElement("style")).id=styleId,n.innerText=".NewVideoWindow_a { position:absolute;top:7px;left:7px;width:100px;height:30px;line-height:30px;text-align:center;background-color:#24aee6;cursor: pointer;font-size:14px;border-radius:5px;text-decoration:none !important;z-index:999999;color:#fff;}",e.head.appendChild(n));var n=getElement(`#${aId}`);n&&n.parentNode.removeChild(n);e=e.createElement("a");return e.id=aId,e.setAttribute("class","NewVideoWindow_a"),e.innerText="小窗口播放",e.href="javascript:void(0);",e.onclick=function(e){openSmallWindow(t)},e}function removeALink(e){e=e.querySelector(`#${aId}`);e&&e.parentNode.removeChild(e)}var addBtn=function(e,t){var n=t.path[0];n.parentNode.appendChild(createStyle(e,n)),t.stopPropagation()},removeBtn=function(e,t){setTimeout(function(){return removeALink(e)},3e3),t.stopPropagation()};function keyUp(e,t){86==((e=e||event).keyCode||e.which||e.charCode)&&addBtn(t,e)}var videos=getElementAll("video");videos&&0<videos.length&&videos.forEach(e=>{addMethod(e,"mouseover",function(e){addBtn(document,e)}),addMethod(e,"mouseout",function(e){removeBtn(document,e)}),document.onkeyup=function(e){keyUp(e,document)}});var iframes=getElementAll("iframe");iframes&&0<iframes.length&&iframes.forEach(t=>{t.contentWindow.document.querySelectorAll("video").forEach(e=>{addMethod(e,"mouseover",function(e){addBtn(t.contentWindow.document,e)}),addMethod(e,"mouseout",function(e){removeBtn(t.contentWindow.document,e)})}),t.contentWindow.document.onkeyup=function(e){keyUp(e,t.contentWindow.document)}});